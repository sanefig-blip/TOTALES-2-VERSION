<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Unidades de Bomberos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        background-color: #111827; /* bg-gray-900 */
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@19.1.1",
    "react-dom/client": "https://esm.sh/react-dom@19.1.1/client",
    "react/": "https://esm.sh/react@^19.1.1/",
    "jspdf": "https://esm.sh/jspdf@2.5.1"
  }
}
</script>
</head>
  <body>
    <div id="root"></div>
    <!-- Load Babel to transpile JSX in the browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Inlined React Application -->
    <script type="text/babel" data-presets="react,typescript" data-type="module">
import React, { useState, useCallback, useMemo, useEffect } from 'react';
import ReactDOM from 'react-dom/client';
import jsPDF from 'jspdf';

// --- From types.ts ---
const UnitStatus = {
    InService: 'In Service', // PARA SERVICIO
    Reserve: 'Reserve', // RESERVA
    Alternative: 'Alternative', // ALTERNATIVA
    OnLoan: 'On Loan', // A PRESTAMOS
    OutOfService: 'Out of Service', // FUERA DE SERVICIO
    Integrating: 'Integrating', // INTEGRANDO FUERZA O SERVICIO
};

const STATUS_CONFIG = {
    [UnitStatus.InService]: { label: 'PARA SERVICIO', badgeClass: 'bg-gray-200 text-gray-900', dotClass: 'bg-gray-200' },
    [UnitStatus.Reserve]: { label: 'RESERVA', badgeClass: 'bg-green-500 text-white', dotClass: 'bg-green-500' },
    [UnitStatus.Alternative]: { label: 'ALTERNATIVA', badgeClass: 'bg-yellow-500 text-black', dotClass: 'bg-yellow-500' },
    [UnitStatus.OnLoan]: { label: 'A PRESTAMOS', badgeClass: 'bg-cyan-500 text-white', dotClass: 'bg-cyan-500' },
    [UnitStatus.OutOfService]: { label: 'FUERA DE SERVICIO', badgeClass: 'bg-red-500 text-white', dotClass: 'bg-red-500' },
    [UnitStatus.Integrating]: { label: 'INTEGRANDO FUERZA O SERVICIO', badgeClass: 'bg-purple-500 text-white', dotClass: 'bg-purple-500' },
};

// --- From components/icons/Icons.tsx ---
const UserIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
    </svg>
);
const UsersIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm6-11a4 4 0 11-8 0 4 4 0 018 0z" />
    </svg>
);
const FileTextIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
    </svg>
);
const ListIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6h16M4 10h16M4 14h16M4 18h16" />
    </svg>
);
const BookIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M22 3.878v16.244a2 2 0 01-2 2H4a2 2 0 01-2-2V3.878A2 2 0 014 2h16a2 2 0 012 1.878zM18 9H6M18 5H6" />
    </svg>
);
const LogOutIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
    </svg>
);
const ArrowRightIcon = ({ className }) => (
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5" stroke="currentColor" className={className}>
    <path strokeLinecap="round" strokeLinejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3" />
  </svg>
);
const CogIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
    </svg>
);
const PlusIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
    </svg>
);
const EditIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z" />
    </svg>
);
const XIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
    </svg>
);
const SearchIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
    </svg>
);
const TrashIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" >
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
    </svg>
);
const CheckIcon = ({ className }) => (
    <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
    </svg>
);

// --- From data/mockData.ts ---
const PERSONNEL_DATA = [
    { lp: '75.236', rank: 'Capitan', lastName: 'LIBERDI', firstName: 'Leonardo Sebastian' },
    { lp: '60.391', rank: 'Capitan', lastName: 'MARTINEZ', firstName: 'Hector Osvaldo' },
    { lp: '60.540', rank: 'Capitan', lastName: 'NIZ', firstName: 'Marcelo Alejandro' },
    { lp: '71.441', rank: 'Capitan', lastName: 'CHIARDI', firstName: 'Adrian Marcelo' },
    { lp: '60.317', rank: 'Capitan', lastName: 'CARRO', firstName: 'Daniel Alberto' },
    { lp: '60.414', rank: 'Capitan', lastName: 'FLORES', firstName: 'Pablo Omar' },
    { lp: '71.058', rank: 'Capitan', lastName: 'HERMANN', firstName: 'Pablo Matias' },
    { lp: '71.452', rank: 'Capitan', lastName: 'CORREA', firstName: 'Ignacio Oscar' },
    { lp: '81.081', rank: 'Capitan', lastName: 'LOBOS', firstName: 'Damian Ezequiel' },
    { lp: '71.860', rank: 'Capitan', lastName: 'ABRAHAN', firstName: 'Daniel Matias' },
    { lp: '73.410', rank: 'Capitan', lastName: 'GIMENEZ ALMADA', firstName: 'Matias Leandro' },
    { lp: '60.126', rank: 'Capitan', lastName: 'SANCHEZ', firstName: 'Carlos Alberto' },
    { lp: '71.820', rank: 'Capitan', lastName: 'Schreiner', firstName: 'Maximiliano G.' },
    { lp: '71.020', rank: 'Bro. Cdo', lastName: 'Cano', firstName: '' },
    { lp: '11.597', rank: 'Teniente', lastName: 'Guerrero', firstName: 'Claudio' },
    { lp: '11.432', rank: 'Teniente', lastName: 'Candia', firstName: 'Israel' },
    { lp: '11.338', rank: 'Bro. Cdo', lastName: 'Methey Doret', firstName: 'Marco' },
    { lp: '11.536', rank: 'Teniente', lastName: 'Fernandez', firstName: 'Julian' },
];

const ZONES_DATA = [
    {
        id: 'zona-i',
        name: 'ZONA I',
        stations: [
            {
                id: 'estacion-i-puerto-madero',
                name: 'ESTACIÃ“N I PUERTO MADERO',
                units: [
                    { id: 'IV-2638', type: 'Autobomba', status: UnitStatus.InService, officerInCharge: { rank: 'Capitan', name: 'Schreiner', lp: '71.820' }, personnelCount: 8 },
                    { id: 'FR-2105', type: 'Camioneta', status: UnitStatus.InService, officerInCharge: { rank: 'Bro. Cdo', name: 'Cano', lp: '71.020' }, personnelCount: 1 },
                    { id: 'FZ-2666', type: 'Unidad Liviana', status: UnitStatus.InService, officerInCharge: null, personnelCount: null },
                    { id: 'BICICLETA-276', type: 'Bicicleta', status: UnitStatus.InService, officerInCharge: null, personnelCount: null },
                    { id: 'BICICLETA-277', type: 'Bicicleta', status: UnitStatus.InService, officerInCharge: null, personnelCount: null },
                    { id: 'POLARIS-6441', type: 'Cuatriciclo', status: UnitStatus.Reserve, officerInCharge: null, personnelCount: null },
                    { id: 'BICICLETA-275', type: 'Bicicleta', status: UnitStatus.OutOfService, officerInCharge: null, personnelCount: null, statusReason: 'ReparaciÃ³n' },
                    { id: 'YAM-3981', type: 'Cuatriciclo', status: UnitStatus.OutOfService, officerInCharge: null, personnelCount: null, statusReason: 'Falta de combustible' },
                    { id: 'POLARIS-3236', type: 'Cuatriciclo', status: UnitStatus.OutOfService, officerInCharge: null, personnelCount: null, statusReason: 'Mantenimiento' },
                ]
            },
            {
                id: 'estacion-ii-patricios',
                name: 'ESTACIÃ“N II PATRICIOS',
                units: [
                    { id: 'IV-2640', type: 'Autobomba', status: UnitStatus.InService, officerInCharge: { rank: 'Teniente', name: 'Guerrero', lp: '11.597' }, personnelCount: 3 },
                    { id: 'IV-9005', type: 'Cisterna', status: UnitStatus.InService, officerInCharge: { rank: 'Teniente', name: 'Candia', lp: '11.432' }, personnelCount: 3 },
                    { id: 'FR-2107', type: 'Camioneta', status: UnitStatus.InService, officerInCharge: { rank: 'Bro. Cdo.', name: 'Methey Doret', lp: '11.338' }, personnelCount: 1 },
                    { id: 'ZFD-2680', type: 'Autobomba Liviana', status: UnitStatus.InService, officerInCharge: { rank: 'Teniente', name: 'Fernandez', lp: '11.536' }, personnelCount: 1 },
                    { id: 'BER-1168', type: 'BERLINGO', status: UnitStatus.OnLoan, officerInCharge: null, personnelCount: null },
                    { id: 'MB-2672', type: 'Autobomba', status: UnitStatus.OnLoan, officerInCharge: null, personnelCount: null },
                    { id: 'ZONDA-2656', type: 'Autobomba Liviana', status: UnitStatus.OutOfService, officerInCharge: null, personnelCount: null, statusReason: 'Problema elÃ©ctrico' },
                    { id: 'MB-2651', type: 'Autobomba', status: UnitStatus.OutOfService, officerInCharge: null, personnelCount: null, statusReason: 'Falla de motor' },
                    { id: 'CAT-DISEL', type: 'IluminaciÃ³n', status: UnitStatus.OutOfService, officerInCharge: null, personnelCount: null, statusReason: 'Mantenimiento' },
                ]
            },
            {
                id: 'destacamento-pompeya',
                name: 'DESTACAMENTO POMPEYA',
                units: [
                    { id: 'MB-9173', type: 'Autobomba', status: UnitStatus.InService, officerInCharge: { rank: 'Teniente', name: 'Fernandez', lp: '11.536' }, personnelCount: 4 },
                ]
            },
            {
                id: 'estacion-iii-barracas',
                name: 'ESTACIÃ“N III BARRACAS',
                units: [
                    { id: 'IV-2641', type: 'Autobomba', status: UnitStatus.InService, officerInCharge: { rank: 'Capitan', name: 'CHIARDI', lp: '71.441' }, personnelCount: 9 },
                    { id: 'IV-9000', type: 'Cisterna', status: UnitStatus.InService, officerInCharge: { rank: 'Capitan', name: 'GIMENEZ ALMADA', lp: '73.410' }, personnelCount: 3 },
                    { id: 'FR-2125', type: 'Camioneta', status: UnitStatus.InService, officerInCharge: { rank: 'Capitan', name: 'SANCHEZ', lp: '60.126' }, personnelCount: 1 },
                    { id: 'ZONDA-2665', type: 'Autobomba Liviana', status: UnitStatus.InService, officerInCharge: { rank: 'Capitan', name: 'NIZ', lp: '60.540' }, personnelCount: 2 },
                    { id: 'MB-2662', type: 'Autobomba', status: UnitStatus.OnLoan, officerInCharge: null, personnelCount: null },
                    { id: 'YAM-3982', type: 'Cuatriciclo', status: UnitStatus.OutOfService, officerInCharge: null, personnelCount: null, statusReason: 'Falla mecÃ¡nica' },
                ]
            },
            {
                id: 'destacamento-boca',
                name: 'DESTACAMENTO BOCA',
                units: [
                    { id: 'AGRALE-8371', type: 'Autobomba', status: UnitStatus.InService, officerInCharge: { rank: 'Capitan', name: 'MARTINEZ', lp: '60.391' }, personnelCount: 5 },
                    { id: 'MB-2660', type: 'Autobomba', status: UnitStatus.OutOfService, officerInCharge: null, personnelCount: null, statusReason: 'En taller' },
                    { id: 'ALLIGHT-4608', type: 'IluminaciÃ³n', status: UnitStatus.OutOfService, officerInCharge: null, personnelCount: null, statusReason: 'ReparaciÃ³n' },
                ]
            },
            {
                id: 'estacion-x-lugano',
                name: 'ESTACIÃ“N X LUGANO',
                units: [
                    { id: 'MB-2675', type: 'Autobomba', status: UnitStatus.InService, officerInCharge: { rank: 'Capitan', name: 'HERMANN', lp: '71.058' }, personnelCount: 10 },
                    { id: 'F.R.-2123', type: 'Camioneta', status: UnitStatus.InService, officerInCharge: { rank: 'Capitan', name: 'CORREA', lp: '71.452' }, personnelCount: 2 },
                    { id: 'YAM-3986', type: 'Cuatriciclo', status: UnitStatus.Reserve, officerInCharge: null, personnelCount: null },
                    { id: 'MB-2674', type: 'Autobomba', status: UnitStatus.OnLoan, officerInCharge: null, personnelCount: null },
                    { id: 'ZONDA-2668', type: 'Autobomba Liviana', status: UnitStatus.OnLoan, officerInCharge: null, personnelCount: null },
                    { id: '4751', type: 'Bote', status: UnitStatus.OutOfService, officerInCharge: null, personnelCount: null, statusReason: 'DaÃ±ado' },
                    { id: 'YAM-3985', type: 'Cuatriciclo', status: UnitStatus.OutOfService, officerInCharge: null, personnelCount: null, statusReason: 'Mantenimiento' },
                    { id: 'F.C-2659', type: 'Cisterna', status: UnitStatus.OutOfService, officerInCharge: null, personnelCount: null, statusReason: 'Fuga' },
                    { id: 'IV-170 P.M.A', type: 'Hidroelevador', status: UnitStatus.OutOfService, officerInCharge: null, personnelCount: null, statusReason: 'Falla hidrÃ¡ulica' },
                    { id: 'ALLIGHT', type: 'IluminaciÃ³n', status: UnitStatus.OutOfService, officerInCharge: null, personnelCount: null, statusReason: 'No funciona' },
                    { id: 'MB-9174', type: 'Autobomba', status: UnitStatus.OutOfService, officerInCharge: null, personnelCount: null, statusReason: 'En taller' },
                    { id: 'F.R.-2826', type: 'Camioneta', status: UnitStatus.OutOfService, officerInCharge: null, personnelCount: null, statusReason: 'Accidente' },
                ]
            }
        ]
    }
];
// --- From components/Header.tsx ---
const Header = ({ onOpenModal, onGeneratePdf }) => {
    return (
        <header className="bg-gray-800 shadow-md">
            <div className="flex items-center justify-between p-4">
                <div className="flex items-center space-x-4">
                    <h1 className="text-xl font-bold text-red-500 uppercase tracking-wider">Unidades de Bomberos</h1>
                    <nav className="hidden md:flex items-center space-x-2">
                        <button onClick={() => onOpenModal('nomenclature')} className="flex items-center px-3 py-2 text-sm font-medium text-gray-300 bg-gray-700 rounded-md hover:bg-gray-600">
                            <ListIcon className="w-4 h-4 mr-2" />
                            Nomenclador
                        </button>
                        <button onClick={() => onOpenModal('personnel')} className="flex items-center px-3 py-2 text-sm font-medium text-gray-300 bg-gray-700 rounded-md hover:bg-gray-600">
                            <UserIcon className="w-4 h-4 mr-2" />
                            Personal
                        </button>
                        <button className="flex items-center px-3 py-2 text-sm font-medium text-gray-300 bg-gray-700 rounded-md hover:bg-gray-600">
                           <ListIcon className="w-4 h-4 mr-2" />
                            Internos
                        </button>
                        <button className="flex items-center px-3 py-2 text-sm font-medium text-gray-300 bg-gray-700 rounded-md hover:bg-gray-600">
                            <BookIcon className="w-4 h-4 mr-2" />
                            Registros
                        </button>
                         <button onClick={onGeneratePdf} className="flex items-center px-3 py-2 text-sm font-medium text-gray-300 bg-gray-700 rounded-md hover:bg-gray-600">
                            <FileTextIcon className="w-4 h-4 mr-2" />
                            PDF
                        </button>
                    </nav>
                </div>
                <div className="flex items-center space-x-4">
                    <div className="text-right">
                        <p className="font-semibold text-white">O.C.O.B.</p>
                        <p className="text-xs text-gray-400">Admin</p>
                    </div>
                    <button className="p-2 bg-gray-700 rounded-md hover:bg-gray-600">
                        <ArrowRightIcon className="w-5 h-5" />
                    </button>
                     <button className="p-2 bg-gray-700 rounded-md hover:bg-gray-600">
                        <LogOutIcon className="w-5 h-5" />
                    </button>
                </div>
            </div>
        </header>
    );
};

// --- From components/StationSection.tsx ---
const StationSection = ({ station, onAssign, onUpdateStatus }) => {
    return (
        <section className="mb-12">
            <h3 className="text-lg font-semibold text-gray-400 mb-4 pb-2 border-b-2 border-gray-700">{station.name}</h3>
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                {station.units.map(unit => (
                    <UnitCard 
                        key={unit.id} 
                        unit={unit}
                        onAssign={() => onAssign(unit)}
                        onUpdateStatus={() => onUpdateStatus(unit)}
                    />
                ))}
            </div>
        </section>
    );
};

// --- From components/UnitCard.tsx ---
const StatusBadge = ({ status, unitId }) => {
    const config = STATUS_CONFIG[status];
    if (!config) { // Fallback for any unknown status to prevent crash
        return (
            <div className="flex items-center space-x-2">
                <span className={`w-3 h-3 rounded-full bg-gray-500`}></span>
                <p className="font-bold text-lg text-gray-200">{unitId}</p>
            </div>
        );
    }
    
    const hasBadge = status !== UnitStatus.InService;

    return (
        <div className="flex items-center space-x-2">
             <span className={`w-3 h-3 rounded-full ${config.dotClass}`}></span>
            <p className="font-bold text-lg text-gray-200">{unitId}</p>
            {hasBadge && <span className={`px-2 py-0.5 text-xs font-semibold rounded-full ${config.badgeClass}`}>{config.label}</span>}
        </div>
    );
};

const UnitCard = ({ unit, onAssign, onUpdateStatus }) => {
    const hasAssignment = unit.officerInCharge && unit.personnelCount;

    return (
        <div className="bg-gray-800 rounded-lg shadow-lg p-4 flex flex-col justify-between min-h-[14rem] transition-all duration-300 hover:shadow-cyan-500/50 hover:ring-1 hover:ring-cyan-500">
            <div>
                <div className="flex justify-between items-start mb-2">
                    <div>
                        <StatusBadge status={unit.status} unitId={unit.id} />
                        <p className={`text-sm font-medium ${unit.status === UnitStatus.OutOfService ? 'text-red-400' : 'text-gray-400'}`}>{unit.type}</p>
                    </div>
                </div>

                 {unit.status === UnitStatus.OutOfService && unit.statusReason && (
                    <p className="text-xs text-red-400 mb-2 truncate" title={unit.statusReason}>
                        Motivo: {unit.statusReason}
                    </p>
                )}

                <div className="text-sm text-gray-400 h-16">
                    {hasAssignment ? (
                        <>
                            <p className="font-semibold text-gray-300">OFICIAL A CARGO</p>
                            <p className="text-yellow-400 font-bold">{unit.officerInCharge?.rank} {unit.officerInCharge?.name}</p>
                            <p className="text-xs">LP: {unit.officerInCharge?.lp}</p>
                            <div className="flex items-center mt-1">
                                <UsersIcon className="w-4 h-4 mr-2" />
                                <span className="font-bold">{unit.personnelCount}</span>
                            </div>
                        </>
                    ) : (
                        unit.status !== UnitStatus.OutOfService && (
                            <div className="flex items-center justify-center h-full">
                                <p>Sin AsignaciÃ³n</p>
                            </div>
                        )
                    )}
                </div>
            </div>

            <div className="flex items-center justify-between mt-4">
                <div className="flex space-x-2">
                    <button className="p-2 bg-gray-700 rounded-md hover:bg-gray-600"><CogIcon className="w-4 h-4" /></button>
                    <button className="p-2 bg-gray-700 rounded-md hover:bg-gray-600"><UserIcon className="w-4 h-4" /></button>
                    <button onClick={onUpdateStatus} className="p-2 bg-gray-700 rounded-md hover:bg-gray-600"><PlusIcon className="w-4 h-4" /></button>
                </div>
                {hasAssignment ? (
                     <button onClick={onAssign} className="flex items-center px-4 py-2 text-sm font-semibold text-white bg-blue-600 rounded-md hover:bg-blue-700">
                        <EditIcon className="w-4 h-4 mr-2" />
                        Editar
                    </button>
                ) : (
                    <button onClick={onAssign} className="flex items-center px-4 py-2 text-sm font-semibold text-white bg-red-600 rounded-md hover:bg-red-700">
                        <PlusIcon className="w-4 h-4 mr-2" />
                        Asignar
                    </button>
                )}
            </div>
        </div>
    );
};

// --- From components/modals/Modal.tsx ---
const Modal = ({ isOpen, onClose, title, children, size = '2xl' }) => {
    if (!isOpen) return null;

    const sizeClasses = {
        'sm': 'max-w-sm',
        'md': 'max-w-md',
        'lg': 'max-w-lg',
        'xl': 'max-w-xl',
        '2xl': 'max-w-2xl',
        '3xl': 'max-w-3xl',
        '4xl': 'max-w-4xl',
    };

    return (
        <div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4">
            <div className={`bg-gray-800 text-gray-200 rounded-lg shadow-xl w-full ${sizeClasses[size]} flex flex-col`}>
                <header className="flex items-center justify-between p-4 border-b border-gray-700">
                    <h2 className="text-lg font-semibold">{title}</h2>
                    <button onClick={onClose} className="p-1 rounded-full hover:bg-gray-700">
                        <XIcon className="w-6 h-6" />
                    </button>
                </header>
                <main className="p-6 overflow-y-auto">
                    {children}
                </main>
            </div>
        </div>
    );
};

// --- From components/modals/AssignOfficerModal.tsx ---
const AssignOfficerModal = ({ unit, personnelList, isOpen, onClose, onSave }) => {
    const [searchTerm, setSearchTerm] = useState('');
    const [selectedOfficer, setSelectedOfficer] = useState(null);
    const [personnelCount, setPersonnelCount] = useState(unit.personnelCount?.toString() || '');
    
    useEffect(() => {
        if (isOpen) {
            setSelectedOfficer(unit.officerInCharge ? personnelList.find(p => p.lp === unit.officerInCharge.lp) || null : null);
            setPersonnelCount(unit.personnelCount?.toString() || '');
            setSearchTerm(unit.officerInCharge ? `${unit.officerInCharge.name}` : '');
        }
    }, [isOpen, unit, personnelList]);


    const filteredPersonnel = useMemo(() => {
        if (!searchTerm) return [];
        return personnelList.filter(p =>
            p.lastName.toLowerCase().includes(searchTerm.toLowerCase()) ||
            p.firstName.toLowerCase().includes(searchTerm.toLowerCase()) ||
            p.lp.includes(searchTerm)
        ).slice(0, 5);
    }, [searchTerm, personnelList]);

    const handleSave = () => {
        if (selectedOfficer && personnelCount) {
            onSave(unit.id, selectedOfficer, parseInt(personnelCount, 10));
        }
    };
    
    const handleSelectOfficer = (officer) => {
        setSelectedOfficer(officer);
        setSearchTerm(`${officer.lastName.toUpperCase()}, ${officer.firstName}`);
    }

    return (
        <Modal isOpen={isOpen} onClose={onClose} title="Asignar Oficial">
            <div className="space-y-6">
                <p className="font-semibold">Unidad: <span className="font-bold text-yellow-400">{unit.id}</span></p>

                <div className="bg-gray-700 p-4 rounded-md">
                    <label htmlFor="search-officer" className="block text-sm font-medium text-blue-300 mb-2">Oficial a Cargo</label>
                    <p className="text-xs text-gray-400 mb-2">Buscar Oficial (por Nombre, Apellido o LP)</p>
                    <input
                        id="search-officer"
                        type="text"
                        value={searchTerm}
                        onChange={(e) => setSearchTerm(e.target.value)}
                        className="w-full bg-gray-800 border border-gray-600 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500"
                    />
                    {searchTerm && filteredPersonnel.length > 0 && (
                        <ul className="mt-2 bg-gray-900 border border-gray-600 rounded-md">
                            {filteredPersonnel.map(p => (
                                <li
                                    key={p.lp}
                                    onClick={() => handleSelectOfficer(p)}
                                    className="p-2 hover:bg-gray-700 cursor-pointer border-b border-gray-700 last:border-b-0"
                                >
                                    <p className="font-bold">{p.lastName.toUpperCase()}, {p.firstName}</p>
                                    <p className="text-xs text-gray-400">{p.rank} - LP: {p.lp}</p>
                                </li>
                            ))}
                        </ul>
                    )}
                </div>

                <div className="bg-gray-700 p-4 rounded-md">
                    <label htmlFor="personnel-count" className="block text-sm font-medium text-blue-300 mb-2">DotaciÃ³n de la Unidad</label>
                    <p className="text-xs text-gray-400 mb-2">Cantidad Total de Personal</p>
                    <input
                        id="personnel-count"
                        type="number"
                        value={personnelCount}
                        onChange={(e) => setPersonnelCount(e.target.value)}
                        className="w-full bg-gray-800 border border-gray-600 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500"
                    />
                </div>
                
                 <div className="bg-gray-700 p-4 rounded-md">
                    <label htmlFor="add-personnel" className="block text-sm font-medium text-blue-300 mb-2">Agregar Personal a la Lista (Opcional)</label>
                    <div className="flex">
                        <input
                            id="add-personnel"
                            type="text"
                            placeholder="Nombre y Apellido"
                            className="w-full bg-gray-800 border border-gray-600 rounded-l-md p-2 focus:ring-blue-500 focus:border-blue-500"
                        />
                        <button className="bg-blue-600 p-2 rounded-r-md hover:bg-blue-700">
                            <PlusIcon className="w-6 h-6 text-white"/>
                        </button>
                    </div>
                </div>

                <footer className="flex justify-end space-x-4 pt-4">
                    <button onClick={onClose} className="px-4 py-2 bg-gray-600 rounded-md hover:bg-gray-500">Cancelar</button>
                    <button onClick={handleSave} disabled={!selectedOfficer || !personnelCount} className="px-4 py-2 bg-red-600 rounded-md hover:bg-red-700 disabled:bg-gray-500 disabled:cursor-not-allowed">Guardar Cambios</button>
                </footer>
            </div>
        </Modal>
    );
};

// --- From components/modals/UpdateStatusModal.tsx ---
const UpdateStatusModal = ({ unit, isOpen, onClose, onSave }) => {
    const [selectedStatus, setSelectedStatus] = useState(unit.status);
    const [reason, setReason] = useState(unit.statusReason || '');
    
     useEffect(() => {
        if (isOpen) {
            setSelectedStatus(unit.status);
            setReason(unit.statusReason || '');
        }
    }, [isOpen, unit]);

    const handleSave = () => {
        onSave(unit.id, selectedStatus, reason);
    };
    
    const statusOptions = Object.values(UnitStatus).map(statusValue => ({
        value: statusValue,
        label: STATUS_CONFIG[statusValue].label,
        dotClass: STATUS_CONFIG[statusValue].dotClass,
    }));


    return (
        <Modal isOpen={isOpen} onClose={onClose} title="Actualizar Estado">
            <div className="space-y-6">
                <p className="font-semibold">Unidad: <span className="font-bold text-yellow-400">{unit.id}</span></p>

                <div>
                    <label className="block text-sm font-medium text-blue-300 mb-2">Seleccionar Nuevo Estado</label>
                    <div className="space-y-2">
                        {statusOptions.map(option => (
                            <button
                                key={option.value}
                                onClick={() => setSelectedStatus(option.value)}
                                className={`w-full text-left p-3 rounded-md flex items-center transition-all duration-200 ${selectedStatus === option.value ? `ring-2 ring-offset-2 ring-offset-gray-800 ring-white` : 'bg-gray-700 hover:bg-gray-600'}`}
                            >
                                <span className={`w-4 h-4 rounded-full mr-3 ${option.dotClass}`}></span>
                                {option.label}
                            </button>
                        ))}
                    </div>
                </div>

                {selectedStatus === UnitStatus.OutOfService && (
                     <div className="bg-gray-700 p-4 rounded-md">
                        <label htmlFor="reason" className="block text-sm font-medium text-blue-300 mb-2">Motivo</label>
                        <input
                            id="reason"
                            type="text"
                            value={reason}
                            onChange={(e) => setReason(e.target.value)}
                            placeholder="Ej. Falta de personal, Problema mecÃ¡nico"
                            className="w-full bg-gray-800 border border-gray-600 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500"
                        />
                    </div>
                )}
                
                <footer className="flex justify-end space-x-4 pt-4">
                    <button onClick={onClose} className="px-4 py-2 bg-gray-600 rounded-md hover:bg-gray-500">Cancelar</button>
                    <button onClick={handleSave} className="px-4 py-2 bg-red-600 rounded-md hover:bg-red-700">Guardar Cambios</button>
                </footer>
            </div>
        </Modal>
    );
};

// --- From components/modals/UnitNomenclatureModal.tsx ---
const UnitNomenclatureModal = ({ isOpen, onClose, zones }) => {
    const [searchTerm, setSearchTerm] = useState('');

    const allUnits = useMemo(() => {
        return zones.flatMap(zone =>
            zone.stations.flatMap(station =>
                station.units.map(unit => ({
                    ...unit,
                    stationName: station.name,
                    zoneName: zone.name,
                }))
            )
        );
    }, [zones]);
    
    const filteredUnits = useMemo(() => {
        if (!searchTerm) return allUnits;
        const lowercasedFilter = searchTerm.toLowerCase();
        return allUnits.filter(unit =>
            unit.id.toLowerCase().includes(lowercasedFilter) ||
            unit.type.toLowerCase().includes(lowercasedFilter) ||
            unit.stationName.toLowerCase().includes(lowercasedFilter) ||
            unit.zoneName.toLowerCase().includes(lowercasedFilter)
        );
    }, [searchTerm, allUnits]);

    return (
        <Modal isOpen={isOpen} onClose={onClose} title="Nomenclador de Unidades" size="4xl">
            <div className="flex flex-col h-[70vh]">
                <p className="text-sm text-gray-400 mb-4">Gestionar el parque automotor.</p>
                <div className="flex justify-between items-center mb-4">
                    <div className="relative w-full max-w-xs">
                        <input
                            type="text"
                            placeholder="Buscar por nombre, ID, interno, estaciÃ³n, tipo..."
                            value={searchTerm}
                            onChange={e => setSearchTerm(e.target.value)}
                            className="w-full bg-gray-900 border border-gray-600 rounded-md p-2 pl-10 focus:ring-red-500 focus:border-red-500"
                        />
                        <SearchIcon className="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" />
                    </div>
                    <button className="flex items-center px-4 py-2 text-sm font-semibold text-white bg-red-600 rounded-md hover:bg-red-700">
                        <PlusIcon className="w-5 h-5 mr-2" />
                        Agregar Unidad
                    </button>
                </div>
                
                <div className="flex-grow overflow-y-auto">
                    <table className="w-full text-sm text-left text-gray-400">
                        <thead className="text-xs text-gray-300 uppercase bg-gray-700 sticky top-0">
                            <tr>
                                <th scope="col" className="px-6 py-3">Nombre (ID)</th>
                                <th scope="col" className="px-6 py-3">NÂ° Interno</th>
                                <th scope="col" className="px-6 py-3">Tipo</th>
                                <th scope="col" className="px-6 py-3">EstaciÃ³n / Zona</th>
                                <th scope="col" className="px-6 py-3">Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            {filteredUnits.map(unit => (
                                <tr key={unit.id} className="bg-gray-800 border-b border-gray-700 hover:bg-gray-600">
                                    <th scope="row" className="px-6 py-4 font-medium text-white whitespace-nowrap">
                                        {unit.id}
                                    </th>
                                    <td className="px-6 py-4">-</td>
                                    <td className="px-6 py-4">{unit.type}</td>
                                    <td className="px-6 py-4">{unit.stationName} <br /> <span className="text-xs text-gray-500">{unit.zoneName}</span></td>
                                    <td className="px-6 py-4">
                                        <div className="flex space-x-3">
                                            <button className="text-blue-400 hover:text-blue-300"><EditIcon className="w-5 h-5"/></button>
                                            <button className="text-red-400 hover:text-red-300"><TrashIcon className="w-5 h-5"/></button>
                                        </div>
                                    </td>
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>
            </div>
        </Modal>
    );
};

// --- From components/modals/PersonnelModal.tsx ---
const PersonnelForm = ({ personnel, onSave, onCancel }) => {
    const [formData, setFormData] = useState({
        lp: '',
        rank: '',
        lastName: '',
        firstName: '',
    });

    useEffect(() => {
        if (personnel) {
            setFormData(personnel);
        } else {
            setFormData({ lp: '', rank: '', lastName: '', firstName: '' });
        }
    }, [personnel]);

    const handleChange = (e) => {
        const { name, value } = e.target;
        setFormData(prev => ({ ...prev, [name]: value }));
    };

    const handleSubmit = (e) => {
        e.preventDefault();
        onSave(formData);
    };
    
    const isEditing = !!personnel;

    return (
        <form onSubmit={handleSubmit} className="bg-gray-700 p-4 rounded-lg mb-4 space-y-4">
             <h3 className="text-lg font-semibold text-white">{isEditing ? 'Editar Personal' : 'Agregar Nuevo Personal'}</h3>
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <input name="lp" value={formData.lp} onChange={handleChange} placeholder="LP" disabled={isEditing} required className="bg-gray-800 border border-gray-600 rounded-md p-2 focus:ring-red-500 focus:border-red-500 disabled:opacity-50"/>
                <input name="rank" value={formData.rank} onChange={handleChange} placeholder="Rango" required className="bg-gray-800 border border-gray-600 rounded-md p-2 focus:ring-red-500 focus:border-red-500" />
                <input name="lastName" value={formData.lastName} onChange={handleChange} placeholder="Apellido" required className="bg-gray-800 border border-gray-600 rounded-md p-2 focus:ring-red-500 focus:border-red-500" />
                <input name="firstName" value={formData.firstName} onChange={handleChange} placeholder="Nombre" required className="bg-gray-800 border border-gray-600 rounded-md p-2 focus:ring-red-500 focus:border-red-500" />
            </div>
            <div className="flex justify-end space-x-3">
                <button type="button" onClick={onCancel} className="px-4 py-2 bg-gray-600 rounded-md hover:bg-gray-500">Cancelar</button>
                <button type="submit" className="px-4 py-2 bg-red-600 rounded-md hover:bg-red-700">{isEditing ? 'Guardar Cambios' : 'Agregar Personal'}</button>
            </div>
        </form>
    );
};

const PersonnelModal = ({ isOpen, onClose, personnelList, onAdd, onUpdate, onDelete }) => {
    const [searchTerm, setSearchTerm] = useState('');
    const [isFormOpen, setIsFormOpen] = useState(false);
    const [editingPersonnel, setEditingPersonnel] = useState(null);

    const filteredPersonnel = useMemo(() => {
        if (!searchTerm) return personnelList;
        const lowercasedFilter = searchTerm.toLowerCase();
        return personnelList.filter(p =>
            p.lp.toLowerCase().includes(lowercasedFilter) ||
            p.rank.toLowerCase().includes(lowercasedFilter) ||
            p.lastName.toLowerCase().includes(lowercasedFilter) ||
            p.firstName.toLowerCase().includes(lowercasedFilter)
        );
    }, [searchTerm, personnelList]);
    
    const handleAddNew = () => {
        setEditingPersonnel(null);
        setIsFormOpen(true);
    };
    
    const handleEdit = (personnel) => {
        setEditingPersonnel(personnel);
        setIsFormOpen(true);
    };

    const handleSave = (personnel) => {
        if(editingPersonnel) {
            onUpdate(personnel);
        } else {
            onAdd(personnel);
        }
        setIsFormOpen(false);
        setEditingPersonnel(null);
    };
    
    const handleCancel = () => {
        setIsFormOpen(false);
        setEditingPersonnel(null);
    };

    return (
        <Modal isOpen={isOpen} onClose={onClose} title="Gestionar Personal" size="4xl">
            <div className="flex flex-col h-[70vh]">
                <div className="flex justify-between items-center mb-4">
                    <div className="relative w-full max-w-xs">
                        <input
                            type="text"
                            placeholder="Buscar por LP, rango, nombre..."
                            value={searchTerm}
                            onChange={e => setSearchTerm(e.target.value)}
                            className="w-full bg-gray-900 border border-gray-600 rounded-md p-2 pl-10 focus:ring-red-500 focus:border-red-500"
                        />
                        <SearchIcon className="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" />
                    </div>
                    {!isFormOpen && (
                        <button onClick={handleAddNew} className="flex items-center px-4 py-2 text-sm font-semibold text-white bg-red-600 rounded-md hover:bg-red-700">
                            <PlusIcon className="w-5 h-5 mr-2" />
                            Agregar Personal
                        </button>
                    )}
                </div>

                {isFormOpen && <PersonnelForm personnel={editingPersonnel} onSave={handleSave} onCancel={handleCancel} />}
                
                <div className="flex-grow overflow-y-auto">
                    <table className="w-full text-sm text-left text-gray-400">
                        <thead className="text-xs text-gray-300 uppercase bg-gray-700 sticky top-0">
                            <tr>
                                <th scope="col" className="px-6 py-3">LP</th>
                                <th scope="col" className="px-6 py-3">Rango</th>
                                <th scope="col" className="px-6 py-3">Apellido</th>
                                <th scope="col" className="px-6 py-3">Nombre</th>
                                <th scope="col" className="px-6 py-3">Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            {filteredPersonnel.map(p => (
                                <tr key={p.lp} className="bg-gray-800 border-b border-gray-700 hover:bg-gray-600">
                                    <th scope="row" className="px-6 py-4 font-medium text-white whitespace-nowrap">{p.lp}</th>
                                    <td className="px-6 py-4">{p.rank}</td>
                                    <td className="px-6 py-4">{p.lastName}</td>
                                    <td className="px-6 py-4">{p.firstName}</td>
                                    <td className="px-6 py-4">
                                        <div className="flex space-x-3">
                                            <button onClick={() => handleEdit(p)} className="text-blue-400 hover:text-blue-300"><EditIcon className="w-5 h-5"/></button>
                                            <button onClick={() => onDelete(p.lp)} className="text-red-400 hover:text-red-300"><TrashIcon className="w-5 h-5"/></button>
                                        </div>
                                    </td>
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>
            </div>
        </Modal>
    );
};
// --- From App.tsx ---
const App = () => {
    const [zones, setZones] = useState(ZONES_DATA);
    const [personnel, setPersonnel] = useState(PERSONNEL_DATA);
    const [activeModal, setActiveModal] = useState(null);
    const [selectedUnit, setSelectedUnit] = useState(null);

    const handleOpenModal = (modal, unit = null) => {
        setSelectedUnit(unit);
        setActiveModal(modal);
    };

    const handleCloseModal = () => {
        setActiveModal(null);
        setSelectedUnit(null);
    };

    const handleGeneratePdf = useCallback(() => {
        const doc = new jsPDF();
        let y = 15;
        const lineHeight = 7;
        const pageHeight = doc.internal.pageSize.height;

        const checkPageBreak = () => {
            if (y > pageHeight - 20) {
                doc.addPage();
                y = 15;
            }
        };

        doc.setFontSize(18);
        doc.text("Reporte de Estado de Unidades", 14, y);
        y += lineHeight * 2;

        zones.forEach(zone => {
            checkPageBreak();
            doc.setFontSize(14);
            doc.text(zone.name, 14, y);
            y += lineHeight;

            zone.stations.forEach(station => {
                checkPageBreak();
                doc.setFontSize(12);
                doc.text(station.name, 20, y);
                y += lineHeight;

                station.units.forEach(unit => {
                    checkPageBreak();
                    doc.setFontSize(10);
                    const statusInfo = STATUS_CONFIG[unit.status]?.label || unit.status;
                    let officerText = "Sin AsignaciÃ³n";
                    if (unit.officerInCharge) {
                        officerText = `${unit.officerInCharge.rank} ${unit.officerInCharge.name} (LP: ${unit.officerInCharge.lp})`;
                    }
                    
                    let unitText = `  - ${unit.id} (${unit.type}): ${statusInfo}`;
                    doc.text(unitText, 25, y);
                    y += lineHeight;

                    if (unit.status === UnitStatus.OutOfService && unit.statusReason) {
                         checkPageBreak();
                         doc.text(`    Motivo: ${unit.statusReason}`, 25, y);
                         y += lineHeight;
                    }

                    if (unit.officerInCharge) {
                        checkPageBreak();
                        doc.text(`    A Cargo: ${officerText}`, 25, y);
                        y += lineHeight;
                        doc.text(`    DotaciÃ³n: ${unit.personnelCount}`, 25, y);
                        y += lineHeight;
                    }
                     y += lineHeight / 2; // Add some space between units
                });
            });
             y += lineHeight; // Add some space between zones
        });

        doc.save('reporte_unidades.pdf');
    }, [zones]);

    const handleSaveAssignment = useCallback((unitId, officer, personnelCount) => {
        setZones(prevZones => {
            return prevZones.map(zone => ({
                ...zone,
                stations: zone.stations.map(station => ({
                    ...station,
                    units: station.units.map(unit => {
                        if (unit.id === unitId) {
                            return {
                                ...unit,
                                officerInCharge: {
                                    rank: officer.rank,
                                    name: officer.lastName,
                                    lp: officer.lp,
                                },
                                personnelCount: personnelCount,
                            };
                        }
                        return unit;
                    }),
                })),
            }));
        });
        handleCloseModal();
    }, []);

    const handleUpdateStatus = useCallback((unitId, status, reason) => {
        setZones(prevZones => {
            return prevZones.map(zone => ({
                ...zone,
                stations: zone.stations.map(station => ({
                    ...station,
                    units: station.units.map(unit => {
                        if (unit.id === unitId) {
                            return {
                                ...unit,
                                status: status,
                                statusReason: status === UnitStatus.OutOfService ? reason : undefined,
                                // Unassign officer if out of service
                                officerInCharge: status === UnitStatus.OutOfService ? null : unit.officerInCharge,
                                personnelCount: status === UnitStatus.OutOfService ? null : unit.personnelCount,
                            };
                        }
                        return unit;
                    }),
                })),
            }));
        });
        handleCloseModal();
    }, []);

    const handleAddPersonnel = (newPersonnel) => {
        setPersonnel(prev => [...prev, newPersonnel]);
    };
    const handleUpdatePersonnel = (updatedPersonnel) => {
        setPersonnel(prev => prev.map(p => p.lp === updatedPersonnel.lp ? updatedPersonnel : p));
    };
    const handleDeletePersonnel = (lp) => {
        setPersonnel(prev => prev.filter(p => p.lp !== lp));
    };

    return (
        <div className="min-h-screen text-white">
            <Header onOpenModal={handleOpenModal} onGeneratePdf={handleGeneratePdf} />
            <main className="p-4 md:p-8">
                {zones.map(zone => (
                    <div key={zone.id}>
                        <h2 className="text-2xl font-bold text-red-500 mb-6">{zone.name}</h2>
                        {zone.stations.map(station => (
                            <StationSection
                                key={station.id}
                                station={station}
                                onAssign={(unit) => handleOpenModal('assignOfficer', unit)}
                                onUpdateStatus={(unit) => handleOpenModal('updateStatus', unit)}
                            />
                        ))}
                    </div>
                ))}
            </main>
            
            {selectedUnit && (
                <>
                    <AssignOfficerModal
                        isOpen={activeModal === 'assignOfficer'}
                        onClose={handleCloseModal}
                        unit={selectedUnit}
                        personnelList={personnel}
                        onSave={handleSaveAssignment}
                    />
                    <UpdateStatusModal
                        isOpen={activeModal === 'updateStatus'}
                        onClose={handleCloseModal}
                        unit={selectedUnit}
                        onSave={handleUpdateStatus}
                    />
                </>
            )}
            <UnitNomenclatureModal 
                isOpen={activeModal === 'nomenclature'} 
                onClose={handleCloseModal} 
                zones={zones}
            />
            <PersonnelModal
                isOpen={activeModal === 'personnel'}
                onClose={handleCloseModal}
                personnelList={personnel}
                onAdd={handleAddPersonnel}
                onUpdate={handleUpdatePersonnel}
                onDelete={handleDeletePersonnel}
            />
        </div>
    );
};

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<App />);

    </script>
  </body>
</html>